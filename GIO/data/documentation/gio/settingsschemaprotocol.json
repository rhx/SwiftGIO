{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"SettingsSchemaProtocol"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"PointerWrapper","preciseIdentifier":"s:4GLib14PointerWrapperP"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Plugin loading systems that wish to provide plugins a way to access"},{"type":"text","text":" "},{"type":"text","text":"settings face the problem of how to make the schemas for these"},{"type":"text","text":" "},{"type":"text","text":"settings visible to GSettings.  Typically, a plugin will want to ship"},{"type":"text","text":" "},{"type":"text","text":"the schema along with itself and it won’t be installed into the"},{"type":"text","text":" "},{"type":"text","text":"standard system directories for schemas."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"[struct"},{"type":"reference","isActive":true,"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSource"},{"type":"text","text":"] provides a mechanism for dealing with this"},{"type":"text","text":" "},{"type":"text","text":"by allowing the creation of a new ‘schema source’ from which schemas can"},{"type":"text","text":" "},{"type":"text","text":"be acquired.  This schema source can then become part of the metadata"},{"type":"text","text":" "},{"type":"text","text":"associated with the plugin and queried whenever the plugin requires"},{"type":"text","text":" "},{"type":"text","text":"access to some settings."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Consider the following example:"}]},{"type":"codeListing","syntax":"c","code":["typedef struct","{","   …","   GSettingsSchemaSource *schema_source;","   …","} Plugin;","","Plugin *","initialise_plugin (const gchar *dir)","{","  Plugin *plugin;","","  …","","  plugin->schema_source =","    g_settings_schema_source_new_from_directory (dir,","      g_settings_schema_source_get_default (), FALSE, NULL);","","  …","","  return plugin;","}","","…","","GSettings *","plugin_get_settings (Plugin      *plugin,","                     const gchar *schema_id)","{","  GSettingsSchema *schema;","","  if (schema_id == NULL)","    schema_id = plugin->identifier;","","  schema = g_settings_schema_source_lookup (plugin->schema_source,","                                            schema_id, FALSE);","","  if (schema == NULL)","    {","      … disable the plugin or abort, etc …","    }","","  return g_settings_new_full (schema, NULL, NULL);","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The code above shows how hooks should be added to the code that"},{"type":"text","text":" "},{"type":"text","text":"initialises (or enables) the plugin to create the schema source and"},{"type":"text","text":" "},{"type":"text","text":"how an API can be added to the plugin system to provide a convenient"},{"type":"text","text":" "},{"type":"text","text":"way for the plugin to access its settings, using the schemas that it"},{"type":"text","text":" "},{"type":"text","text":"ships."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"From the standpoint of the plugin, it would need to ensure that it"},{"type":"text","text":" "},{"type":"text","text":"ships a gschemas.compiled file as part of itself, and then simply do"},{"type":"text","text":" "},{"type":"text","text":"the following:"}]},{"type":"codeListing","syntax":"c","code":["{","  GSettings *settings;","  gint some_value;","","  settings = plugin_get_settings (self, NULL);","  some_value = g_settings_get_int (settings, \"some-value\");","  …","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"It’s also possible that the plugin system expects the schema source"},{"type":"text","text":" "},{"type":"text","text":"files (ie: "},{"type":"codeVoice","code":".gschema.xml"},{"type":"text","text":" files) instead of a "},{"type":"codeVoice","code":"gschemas.compiled"},{"type":"text","text":" file."},{"type":"text","text":" "},{"type":"text","text":"In that case, the plugin loading system must compile the schemas for"},{"type":"text","text":" "},{"type":"text","text":"itself before attempting to create the settings source."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol"},{"type":"text","text":" protocol exposes the methods and properties of an underlying "},{"type":"codeVoice","code":"GSettingsSchema"},{"type":"text","text":" instance."},{"type":"text","text":" "},{"type":"text","text":"The default implementation of these can be found in the protocol extension below."},{"type":"text","text":" "},{"type":"text","text":"For a concrete class that implements these methods and properties, see "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchema"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"Alternatively, use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaRef"},{"type":"text","text":" as a lighweight, "},{"type":"codeVoice","code":"unowned"},{"type":"text","text":" reference if you already have an instance you just want to use."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/gio\/settingsschemaprotocol"],"traits":[{"interfaceLanguage":"swift"}]}],"relationshipsSections":[{"identifiers":["doc:\/\/GIO\/4GLib14PointerWrapperP"],"kind":"relationships","title":"Inherits From","type":"inheritsFrom"},{"identifiers":["doc:\/\/GIO\/documentation\/GIO\/SettingsSchema","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaRef"],"kind":"relationships","title":"Conforming Types","type":"conformingTypes"}],"identifier":{"url":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"The [struct"},{"type":"reference","isActive":true,"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSource"},{"type":"text","text":"] and "},{"type":"codeVoice","code":"GSettingsSchema"},{"type":"text","text":" APIs provide a"},{"type":"text","text":" "},{"type":"text","text":"mechanism for advanced control over the loading of schemas and a"},{"type":"text","text":" "},{"type":"text","text":"mechanism for introspecting their content."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"SettingsSchemaProtocol"}],"title":"SettingsSchemaProtocol","roleHeading":"Protocol","role":"symbol","symbolKind":"protocol","externalID":"s:3GIO22SettingsSchemaProtocolP","modules":[{"name":"GIO"}],"navigatorTitle":[{"kind":"identifier","text":"SettingsSchemaProtocol"}]},"hierarchy":{"paths":[["doc:\/\/GIO\/documentation\/GIO"]]},"topicSections":[{"title":"Instance Properties","identifiers":["doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/id","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/path","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/settings_schema_ptr-9ce3j"]},{"title":"Instance Methods","identifiers":["doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/getID()","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/getKey(name:)","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/getPath()","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/hasKey(name:)","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/listChildren()","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/listKeys()","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/ref()","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/unref()"]}],"references":{"doc://GIO/documentation/GIO/SettingsSchemaProtocol/ref()":{"role":"symbol","title":"ref()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"ref"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"SettingsSchemaRef","preciseIdentifier":"s:3GIO17SettingsSchemaRefV"},{"kind":"text","text":"!"}],"abstract":[{"type":"text","text":"Increase the reference count of "},{"type":"codeVoice","code":"schema"},{"type":"text","text":", returning a new reference."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/ref()","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/ref()"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/hasKey(name:)":{"role":"symbol","title":"hasKey(name:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"hasKey"},{"kind":"text","text":"("},{"kind":"externalParam","text":"name"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:gtypes.h@T@gchar"},{"kind":"text","text":">!) -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Checks if "},{"type":"codeVoice","code":"schema"},{"type":"text","text":" has a key named "},{"type":"codeVoice","code":"name"},{"type":"text","text":"."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/hasKey(name:)","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/haskey(name:)"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol":{"role":"symbol","title":"SettingsSchemaProtocol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"SettingsSchemaProtocol"}],"abstract":[{"type":"text","text":"The [struct"},{"type":"reference","isActive":true,"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSource"},{"type":"text","text":"] and "},{"type":"codeVoice","code":"GSettingsSchema"},{"type":"text","text":" APIs provide a"},{"type":"text","text":" "},{"type":"text","text":"mechanism for advanced control over the loading of schemas and a"},{"type":"text","text":" "},{"type":"text","text":"mechanism for introspecting their content."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SettingsSchemaProtocol"}],"url":"\/documentation\/gio\/settingsschemaprotocol"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/settings_schema_ptr-9ce3j":{"defaultImplementations":1,"role":"symbol","title":"settings_schema_ptr","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"settings_schema_ptr"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafeMutablePointer","preciseIdentifier":"s:Sp"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GSettingsSchema"},{"kind":"text","text":">!"}],"abstract":[{"type":"text","text":"Typed pointer to the underlying "},{"type":"codeVoice","code":"GSettingsSchema"},{"type":"text","text":" instance."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/settings_schema_ptr-9ce3j","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/settings_schema_ptr-9ce3j"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/listChildren()":{"role":"symbol","title":"listChildren()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"listChildren"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"UnsafeMutablePointer","preciseIdentifier":"s:Sp"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"UnsafeMutablePointer","preciseIdentifier":"s:Sp"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:gtypes.h@T@gchar"},{"kind":"text","text":">?>!"}],"abstract":[{"type":"text","text":"Gets the list of children in "},{"type":"codeVoice","code":"schema"},{"type":"text","text":"."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/listChildren()","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/listchildren()"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/id":{"role":"symbol","title":"id","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"id"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"!"}],"abstract":[{"type":"text","text":"Get the ID of "},{"type":"codeVoice","code":"schema"},{"type":"text","text":"."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/id","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/id"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/getPath()":{"role":"symbol","title":"getPath()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getPath"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"!"}],"abstract":[{"type":"text","text":"Gets the path associated with "},{"type":"codeVoice","code":"schema"},{"type":"text","text":", or "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/getPath()","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/getpath()"},"doc://GIO/documentation/GIO":{"role":"collection","title":"GIO","abstract":[],"identifier":"doc:\/\/GIO\/documentation\/GIO","kind":"symbol","type":"topic","url":"\/documentation\/gio"},"doc://GIO/documentation/GIO/SettingsSchema":{"role":"symbol","title":"SettingsSchema","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"SettingsSchema"}],"abstract":[{"type":"text","text":"The [struct"},{"type":"reference","isActive":true,"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSource"},{"type":"text","text":"] and "},{"type":"codeVoice","code":"GSettingsSchema"},{"type":"text","text":" APIs provide a"},{"type":"text","text":" "},{"type":"text","text":"mechanism for advanced control over the loading of schemas and a"},{"type":"text","text":" "},{"type":"text","text":"mechanism for introspecting their content."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchema","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SettingsSchema"}],"url":"\/documentation\/gio\/settingsschema"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/getID()":{"role":"symbol","title":"getID()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getID"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"!"}],"abstract":[{"type":"text","text":"Get the ID of "},{"type":"codeVoice","code":"schema"},{"type":"text","text":"."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/getID()","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/getid()"},"doc://GIO/documentation/GIO/SettingsSchemaSource":{"role":"symbol","title":"SettingsSchemaSource","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"SettingsSchemaSource"}],"abstract":[{"type":"text","text":"This is an opaque structure type.  You may not access it directly."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSource","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SettingsSchemaSource"}],"url":"\/documentation\/gio\/settingsschemasource"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/unref()":{"role":"symbol","title":"unref()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"unref"},{"kind":"text","text":"()"}],"abstract":[{"type":"text","text":"Decrease the reference count of "},{"type":"codeVoice","code":"schema"},{"type":"text","text":", possibly freeing it."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/unref()","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/unref()"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/getKey(name:)":{"role":"symbol","title":"getKey(name:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getKey"},{"kind":"text","text":"("},{"kind":"externalParam","text":"name"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:gtypes.h@T@gchar"},{"kind":"text","text":">!) -> "},{"kind":"typeIdentifier","text":"SettingsSchemaKeyRef","preciseIdentifier":"s:3GIO20SettingsSchemaKeyRefV"},{"kind":"text","text":"!"}],"abstract":[{"type":"text","text":"Gets the key named "},{"type":"codeVoice","code":"name"},{"type":"text","text":" from "},{"type":"codeVoice","code":"schema"},{"type":"text","text":"."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/getKey(name:)","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/getkey(name:)"},"doc://GIO/4GLib14PointerWrapperP":{"type":"unresolvable","title":"GLib.PointerWrapper","identifier":"doc:\/\/GIO\/4GLib14PointerWrapperP"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/path":{"role":"symbol","title":"path","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"path"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"!"}],"abstract":[{"type":"text","text":"Gets the path associated with "},{"type":"codeVoice","code":"schema"},{"type":"text","text":", or "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/path","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/path"},"doc://GIO/documentation/GIO/SettingsSchemaRef":{"role":"symbol","title":"SettingsSchemaRef","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"SettingsSchemaRef"}],"abstract":[{"type":"text","text":"The [struct"},{"type":"reference","isActive":true,"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSource"},{"type":"text","text":"] and "},{"type":"codeVoice","code":"GSettingsSchema"},{"type":"text","text":" APIs provide a"},{"type":"text","text":" "},{"type":"text","text":"mechanism for advanced control over the loading of schemas and a"},{"type":"text","text":" "},{"type":"text","text":"mechanism for introspecting their content."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaRef","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SettingsSchemaRef"}],"url":"\/documentation\/gio\/settingsschemaref"},"doc://GIO/documentation/GIO/SettingsSchemaProtocol/listKeys()":{"role":"symbol","title":"listKeys()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"listKeys"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"UnsafeMutablePointer","preciseIdentifier":"s:Sp"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"UnsafeMutablePointer","preciseIdentifier":"s:Sp"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:gtypes.h@T@gchar"},{"kind":"text","text":">?>!"}],"abstract":[{"type":"text","text":"Introspects the list of keys on "},{"type":"codeVoice","code":"schema"},{"type":"text","text":"."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaProtocol\/listKeys()","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemaprotocol\/listkeys()"}}}